{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from \"simplelightbox\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '41701983-23ca5d5908e2c78927e8095f2';\nconst ITEMS_PER_PAGE = 40;\n\nconst lightbox = new SimpleLightbox(\".gallery-item\");\n\nconst getBaseUrl = () => {\n  const url = new URL(BASE_URL);\n  url.searchParams.append(\"key\", API_KEY);\n  url.searchParams.append(\"image_type\", \"photo\");\n  url.searchParams.append(\"orientation\", \"horizontal\");\n  url.searchParams.append(\"safesearch\",true);\n\n  return url;\n};\n\nconst fetchImages = async (query, page = 1) => {\n  try {\n    const url = getBaseUrl();\n    url.searchParams.append(\"q\", query);\n    url.searchParams.append(\"page\", page);\n    url.searchParams.append(\"per_page\", ITEMS_PER_PAGE);\n\n    const response = await axios.get(url.toString());\n    return response.data.hits;\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error;\n  }\n};\n\nconst renderGallery = (images) => {\n  const galleryContainer = document.getElementById(\"gallery\");\n  galleryContainer.innerHTML = \"\";\n\n  images.forEach((image) => {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n    galleryContainer.insertAdjacentHTML(\"beforeend\", `\n    <li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n      </a>\n      <div class=\"image-info\">\n        <p>Likes: ${likes}</p>\n        <p>Views: ${views}</p>\n        <p>Comments: ${comments}</p>\n        <p>Downloads: ${downloads}</p>\n      </div>\n    </li>\n    `);\n  });\n\n  lightbox.refresh();\n};\n\nconst showLoadingIndicator = () => {\n  document.getElementById(\"loader\").style.display = \"block\";\n};\n\nconst hideLoadingIndicator = () => {\n  document.getElementById(\"loader\").style.display = \"none\";\n};\n\nconst showMessage = (message, type = \"info\") => {\n  iziToast[type]({\n    title: message,\n    position: \"topCenter\",\n  });\n};\n\nconst handleSearchFormSubmit = async (event) => {\n  event.preventDefault();\n  const searchInput = document.getElementById(\"search-input\");\n  const query = searchInput.value.trim();\n\n  if (query.length < 3) {\n    showMessage(\"Please enter a search query with at least 3 characters\", \"warning\");\n    return;\n  }\n\n  showLoadingIndicator();\n\n  try {\n    const images = await fetchImages(query);\n    hideLoadingIndicator();\n\n    if (images.length > 0) {\n      renderGallery(images);\n\n      document.getElementById(\"load-more\").style.display = images.length >= ITEMS_PER_PAGE ? \"block\" : \"none\";\n    } else {\n      showMessage(\"Sorry, there are no images matching your search query. Please try again.\", \"error\");\n    }\n  } catch (error) {\n    hideLoadingIndicator();\n    showMessage(\"Error fetching images. Please try again later.\", \"error\");\n  }\n};\n\nconst loadMoreImages = async () => {\n  const searchInput = document.getElementById(\"search-input\");\n  const query = searchInput.value.trim();\n\n  if (query.length < 3) {\n    showMessage(\"Please enter a search query with at least 3 characters\", \"warning\");\n    return;\n  }\n\n  showLoadingIndicator();\n\n  try {\n    const images = await fetchImages(query, currentPage);\n\n    hideLoadingIndicator();\n\n    if (images.length > 0) {\n      renderGallery(images);\n      currentPage++;\n\n      window.scrollBy(0, getCardHeight());\n    } else {\n      showMessage(\"No more images t load\", \"info\");\n\n      document.getElementById(\"load-more\").style.display = \"none\";\n    }\n  } catch (error) {\n    hideLoadingIndicator();\n    showMessage(\"Error fetching images. Please try again later.\", \"error\");\n  }\n};\n\nconst getCardHeight = () => {\n  const firstCard = document.querySelector(\".gallery-item\");\n  return firstCard ? firstCard.getBoundingClientRect().height : 0;\n};\n\nlet currentPage = 1;\n\nconst searchForm = document.getElementById(\"form\");\nsearchForm.addEventListener(\"submit\", handleSearchFormSubmit);\n\nconst loadMoreButton = document.getElementById(\"load-more\");\nloadMoreButton.addEventListener(\"click\", loadMoreImages);"],"names":["BASE_URL","API_KEY","ITEMS_PER_PAGE","lightbox","SimpleLightbox","getBaseUrl","url","fetchImages","query","page","axios","error","renderGallery","images","galleryContainer","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoadingIndicator","hideLoadingIndicator","showMessage","message","type","iziToast","handleSearchFormSubmit","event","loadMoreImages","currentPage","getCardHeight","firstCard","searchForm","loadMoreButton"],"mappings":"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"}